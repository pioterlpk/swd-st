<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SWD‑ST | PSP – Powiat Garwoliński</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">

<style>
:root {
  --red: #b30000;
  --dark: #1c1f26;
  --gray: #2a2e38;
  --light: #f4f6f9;
  --green: #2ecc71;
  --orange: #f39c12;
}

* { box-sizing: border-box; font-family: 'Inter', sans-serif; margin: 0; padding: 0; }

body { background: var(--light); color: #222; }
header { background: linear-gradient(90deg, #8b0000, var(--red)); color: white; padding: 16px 24px; display: flex; justify-content: space-between; align-items: center; }
header h1 { font-size: 20px; font-weight: 700; }
header span { font-size: 13px; opacity: 0.9; }

nav { background: var(--dark); display: flex; gap: 10px; padding: 10px 20px; }
nav button { background: none; border: none; color: white; padding: 10px 16px; border-radius: 6px; cursor: pointer; font-weight: 600; }
nav button.active { background: var(--red); }

.container { display: flex; height: calc(100vh - 80px); }

.sidebar { width: 250px; background: var(--gray); color: white; padding: 20px; }
.sidebar h2 { font-size: 14px; text-transform: uppercase; opacity: 0.7; margin-bottom: 10px; }
.stat { background: var(--dark); padding: 14px; border-radius: 8px; margin-bottom: 12px; }
.stat strong { font-size: 22px; display: block; }
.stat span { font-size: 12px; opacity: 0.8; }

.main { flex: 1; padding: 20px; overflow-y: auto; }
.grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }

.card { background: white; border-radius: 10px; padding: 16px; box-shadow: 0 10px 25px rgba(0,0,0,0.08); margin-bottom: 20px; }
.card h3 { margin-top: 0; font-size: 16px; margin-bottom: 10px; }

table { width: 100%; border-collapse: collapse; font-size: 13px; margin-bottom: 10px; }
th, td { padding: 8px; border-bottom: 1px solid #eee; text-align: left; }
.status { padding: 4px 8px; border-radius: 20px; font-size: 11px; font-weight: 600; }
.active { background: #ffe6e6; color: var(--red); }
.closed { background: #e8f8ef; color: var(--green); }

.map { width: 100%; height: 400px; border-radius: 10px; border: none; margin-bottom: 20px; }

form input, form select, form button { display: block; width: 100%; margin-bottom: 10px; padding: 8px; border-radius: 6px; border: 1px solid #ccc; font-size: 14px; }
form button { background: var(--red); color: white; border: none; cursor: pointer; transition: 0.2s; }
form button:hover { background: #8b0000; }

.footer { text-align: center; font-size: 11px; opacity: 0.6; margin-top: 10px; }

.hidden { display: none; }
</style>
</head>

<body>

<header>
  <h1>SWD‑ST | Państwowa Straż Pożarna</h1>
  <span>Powiat Garwoliński • tryb demonstracyjny</span>
</header>

<nav>
  <button class="tab-btn active" data-tab="dashboard">Dashboard</button>
  <button class="tab-btn" data-tab="zdarzenia">Zdarzenia</button>
  <button class="tab-btn" data-tab="jednostki">Jednostki</button>
  <button class="tab-btn" data-tab="statystyki">Statystyki</button>
</nav>

<div class="container">
  <aside class="sidebar">
    <h2>Status systemu</h2>
    <div class="stat"><strong style="color:var(--green)">ONLINE</strong><span>Łączność operacyjna</span></div>
    <div class="stat"><strong id="total-events">3</strong><span>Zdarzenia dzisiaj</span></div>
    <div class="stat"><strong id="active-events">2</strong><span>Aktywne działania</span></div>
    <div class="stat"><strong>19</strong><span>Jednostki PSP / OSP</span></div>
  </aside>

  <main class="main">
    <!-- Dashboard -->
    <div class="tab-content" id="dashboard">
      <div class="grid">
        <div class="card">
          <h3>Mapa operacyjna – powiat garwoliński</h3>
          <iframe class="map" loading="lazy" referrerpolicy="no-referrer-when-downgrade" 
            src="https://www.google.com/maps?q=powiat%20garwoli%C5%84ski&output=embed"></iframe>
        </div>

        <div class="card">
          <h3>Aktywne zdarzenia</h3>
          <table id="events-table">
            <thead>
              <tr><th>ID</th><th>Typ</th><th>Lokalizacja</th><th>Status</th></tr>
            </thead>
            <tbody>
              <tr>
                <td>#2026/041</td><td>Pożar trawy</td><td>Wilga</td><td><span class="status active">W trakcie</span></td>
              </tr>
              <tr>
                <td>#2026/039</td><td>Wypadek drogowy</td><td>Garwolin</td><td><span class="status active">W trakcie</span></td>
              </tr>
              <tr>
                <td>#2026/031</td><td>Miejscowe zagrożenie</td><td>Łaskarzew</td><td><span class="status closed">Zakończone</span></td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <!-- Zdarzenia -->
    <div class="tab-content hidden" id="zdarzenia">
      <div class="card">
        <h3>Dodaj nowe zdarzenie</h3>
        <form id="add-event-form">
          <input type="text" id="event-type" placeholder="Typ zdarzenia" required>
          <input type="text" id="event-location" placeholder="Lokalizacja" required>
          <select id="event-status">
            <option value="active">W trakcie</option>
            <option value="closed">Zakończone</option>
          </select>
          <button type="submit">Dodaj zdarzenie</button>
        </form>
      </div>
    </div>

    <!-- Jednostki -->
    <div class="tab-content hidden" id="jednostki">
      <div class="card">
        <h3>Przydziel jednostki do zdarzenia</h3>
        <form id="assign-unit-form">
          <select id="select-event" required>
            <option value="">-- Wybierz zdarzenie --</option>
          </select>
          <select id="select-unit" required>
            <option value="OSP Garwolin">OSP Garwolin</option>
            <option value="PSP Garwolin">PSP Garwolin</option>
            <option value="OSP Wilga">OSP Wilga</option>
            <option value="PSP Łaskarzew">PSP Łaskarzew</option>
          </select>
          <button type="submit">Przydziel jednostkę</button>
        </form>
        <div id="assignments" style="margin-top:10px;"></div>
      </div>
    </div>

    <!-- Statystyki -->
    <div class="tab-content hidden" id="statystyki">
      <div class="card">
        <h3>Statystyki zdarzeń</h3>
        <p>Łączna liczba zdarzeń: <span id="stats-total">3</span></p>
        <p>Aktywne: <span id="stats-active">2</span></p>
        <p>Zakończone: <span id="stats-closed">1</span></p>
      </div>
    </div>

    <div class="footer">
      © 2026 • System Wizualizacji Działań (SWD‑ST) • Projekt demonstracyjny
    </div>
  </main>
</div>

<script>
const tabs = document.querySelectorAll('.tab-btn');
const contents = document.querySelectorAll('.tab-content');
tabs.forEach(tab => {
  tab.addEventListener('click', () => {
    tabs.forEach(t=>t.classList.remove('active'));
    tab.classList.add('active');
    const target = tab.dataset.tab;
    contents.forEach(c => c.classList.add('hidden'));
    document.getElementById(target).classList.remove('hidden');
    if(target==="jednostki"){ updateEventDropdown(); }
  });
});

const eventsTable = document.getElementById('events-table').querySelector('tbody');
const addEventForm = document.getElementById('add-event-form');
addEventForm.addEventListener('submit', e => {
  e.preventDefault();
  const type = document.getElementById('event-type').value;
  const loc = document.getElementById('event-location').value;
  const status = document.getElementById('event-status').value;
  const id = '#2026/' + Math.floor(Math.random()*900 + 100);
  const tr = document.createElement('tr');
  tr.innerHTML = `<td>${id}</td><td>${type}</td><td>${loc}</td><td><span class="status ${status}">${status==="active"?"W trakcie":"Zakończone"}</span></td>`;
  eventsTable.appendChild(tr);
  updateStats();
  addEventForm.reset();
});

function updateStats(){
  const rows = eventsTable.querySelectorAll('tr');
  document.getElementById('total-events').textContent = rows.length;
  let active = 0, closed = 0;
  rows.forEach(r => {
    const status = r.querySelector('.status').classList.contains('active');
    if(status) active++; else closed++;
  });
  document.getElementById('active-events').textContent = active;
  document.getElementById('stats-total').textContent = rows.length;
  document.getElementById('stats-active').textContent = active;
  document.getElementById('stats-closed').textContent = closed;
}

function updateEventDropdown(){
  const select = document.getElementById('select-event');
  select.innerHTML = '<option value="">-- Wybierz zdarzenie --</option>';
  eventsTable.querySelectorAll('tr').forEach(tr=>{
    const id = tr.children[0].textContent;
    select.innerHTML += `<option value="${id}">${id} - ${tr.children[1].textContent}</option>`;
  });
}

const assignForm = document.getElementById('assign-unit-form');
const assignmentsDiv = document.getElementById('assignments');
assignForm.addEventListener('submit', e=>{
  e.preventDefault();
  const eventId = document.getElementById('select-event').value;
  const unit = document.getElementById('select-unit').value;
  if(eventId && unit){
    const p = document.createElement('p');
    p.textContent = `Jednostka ${unit} przydzielona do zdarzenia ${eventId}`;
    assignmentsDiv.appendChild(p);
    assignForm.reset();
  }
});
</script>

</body>
</html>
